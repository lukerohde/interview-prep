{% extends "admin/base_site.html" %}
{% load i18n admin_urls %}

{% block content %}
<div id="content-main">
    {% if error %}
    <p class="errornote">{{ error }}</p>
    {% endif %}
    <p>You are about to adjust credits for {{ count }} users:</p>
    <ul>
    {% for profile in queryset %}
        <li>{{ profile.user.username }} (current balance: {{ profile.balance }})</li>
    {% endfor %}
    </ul>

    <form method="post">{% csrf_token %}
        {% for profile in queryset %}
        <input type="hidden" name="_selected_action" value="{{ profile.pk }}">
        {% endfor %}
        <input type="hidden" name="action" value="make_credit_adjustment">
        <fieldset class="module aligned">
            <div class="form-row">
                <label for="amount">Amount per user:</label>
                <input type="number" name="amount" id="amount" step="0.01" required>
                <div class="help">Enter a positive number to add credits, negative to remove credits</div>
            </div>
            <div class="form-row">
                <label for="description">Description:</label>
                <input type="text" name="description" id="description" required>
                <div class="help">Enter a reason for this adjustment</div>
            </div>
        </fieldset>
        
        <div class="submit-row">
            <input type="submit" name="apply" value="Apply Adjustment to All Selected Users" class="default">
            <a href="../" class="button cancel-link">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}
